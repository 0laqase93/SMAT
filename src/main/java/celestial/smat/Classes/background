package celestial.smat;

import javafx.animation.Animation;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.stage.Stage;
import javafx.util.Duration;

public class App extends Application {

    @Override
    public void start(Stage primaryStage) {
        // Crear un AnchorPane para la interfaz de usuario
        AnchorPane root = new AnchorPane();

        // Crear un Pane para el fondo
        Pane backgroundPane = new Pane();
        root.getChildren().add(backgroundPane);

        // Cargar la imagen de fondo
        Image backgroundImage = new Image(getClass().getResourceAsStream("/celestial/smat/Images/grid.png"));
        BackgroundImage bgImage = new BackgroundImage(
                backgroundImage,
                null,
                null,
                BackgroundPosition.DEFAULT,
                BackgroundSize.DEFAULT
        );
        Background background = new Background(bgImage);
        backgroundPane.setBackground(background);

        // Configurar el tamaño del Pane de fondo
        backgroundPane.setPrefSize(1600, 1200); // Ajustar según sea necesario

        // Crear la escena con el AnchorPane como root
        Scene scene = new Scene(root, 1000, 800);
        scene.setFill(Color.BLACK);

        // Configurar la animación para mover el fondo
        Timeline timeline = new Timeline(new KeyFrame(Duration.millis(20), event -> {
            double newTranslateX = backgroundPane.getTranslateX() - 4;
            double newTranslateY = backgroundPane.getTranslateY() - 4;

            if (newTranslateX <= -backgroundImage.getWidth() / 2) {
                newTranslateX = 0;
            }
            if (newTranslateY <= -backgroundImage.getHeight() / 2) {
                newTranslateY = 0;
            }

            backgroundPane.setTranslateX(newTranslateX);
            backgroundPane.setTranslateY(newTranslateY);
        }));
        timeline.setCycleCount(Animation.INDEFINITE);
        timeline.play();

        // Configurar el stage
        primaryStage.setTitle("Background Image Movement Example");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
